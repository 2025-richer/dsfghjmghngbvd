function e(e){return e&&e instanceof HTMLElement?e:null}function t(){const t=document.getElementById("open-mobile-categories"),n=document.getElementById("mobile-categories-drawer"),i=document.getElementById("mobile-categories-overlay"),r=document.getElementById("mobile-categories-toggle-bar"),a=document.getElementById("close-mobile-categories"),o=document.querySelector(".page-layout-container");if(!(t&&n&&a))return;if("1"===n.getAttribute("data-initialized"))return;n.setAttribute("data-initialized","1");const s=t,c=n,d=a,u=o;function l(){c.classList.remove("active"),c.setAttribute("aria-hidden","true"),s.setAttribute("aria-expanded","false"),u&&(u.removeAttribute("inert"),u.removeAttribute("aria-hidden")),document.documentElement.style.overflow="",document.body.style.overflow="",setTimeout((()=>{c.classList.add("hidden"),r&&r.classList.remove("hidden")}),200),s.focus()}s.addEventListener("click",(function(){c.classList.remove("hidden"),requestAnimationFrame((()=>c.classList.add("active"))),c.setAttribute("aria-hidden","false"),s.setAttribute("aria-expanded","true"),u&&(u.setAttribute("inert",""),u.setAttribute("aria-hidden","true")),r&&r.classList.add("hidden"),document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden",d.focus()})),d.addEventListener("click",l),c.addEventListener("keydown",(t=>{if("Tab"!==t.key)return;const n=Array.from(c.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter((e=>e instanceof HTMLElement&&!e.hasAttribute("disabled")));if(0===n.length)return;const i=n[0],r=n[n.length-1],a=e(document.activeElement);a&&i&&r&&(t.shiftKey&&a===i?(t.preventDefault(),r instanceof HTMLElement&&r.focus()):t.shiftKey||a!==r||(t.preventDefault(),i instanceof HTMLElement&&i.focus()))})),c.addEventListener("click",(e=>{e.target===c&&l()})),i&&i.addEventListener("click",l),document.addEventListener("keydown",(e=>{c.classList.contains("active")&&"Escape"===e.key&&l()}))}document.addEventListener("astro:page-load",t),document.addEventListener("DOMContentLoaded",t),"loading"!==document.readyState&&t();const n=new WeakSet,i=(()=>{try{return window.matchMedia("(hover: none), (pointer: coarse)").matches}catch(e){return!1}})(),r={opacity:"1",transform:"translate(-50%, -50%) scale(1)",pointerEvents:"auto",visibility:"visible",display:"flex"},a=Object.keys(r);function o(e,t){if(e&&e instanceof HTMLElement)try{e.setAttribute("data-active",t?"true":"false");const i=e.querySelector(".site-card-link"),o=e.querySelector(".site-card-cta");i&&i.setAttribute("aria-expanded",String(t)),o instanceof HTMLElement&&(o.setAttribute("aria-hidden",String(!t)),t?Object.entries(r).forEach((([e,t])=>{o.style.setProperty("pointerEvents"===e?"pointer-events":e,t,"important")})):a.forEach((e=>{o.style.removeProperty("pointerEvents"===e?"pointer-events":e)}))),t?n.add(e):n.delete(e)}catch(i){}}const s=new WeakMap;function c(){const t=document.getElementById("sites-grid");if(!t)return void setTimeout((()=>{document.getElementById("sites-grid")&&c()}),100);if(!document.contains(t))return void s.delete(t);if(s.has(t))return;s.set(t,!0),t.addEventListener("click",(t=>{const n=e(t.target);if(!n)return;const i=n.closest(".site-card-container");if(!(i instanceof HTMLElement))return;const r=i.querySelector(".site-card-cta");if(r instanceof HTMLElement&&r.contains(n))return void t.stopPropagation();if(r&&n===r)return o(i,!1),t.preventDefault(),void t.stopPropagation();const a=i.querySelector(".site-card-header"),s=i.querySelector(".site-card-link");if(!a||!s)return;if(!(a.contains(n)||n===a))return;const c=i.querySelector(".site-card-content");if(c?.contains(n))return;const d="true"===i.getAttribute("data-active");t.stopPropagation(),t.preventDefault(),d?o(i,!1):(document.querySelectorAll('.site-card-container[data-active="true"]').forEach((e=>{e instanceof HTMLElement&&e!==i&&o(e,!1)})),o(i,!0),r instanceof HTMLElement&&r.offsetHeight)}),{passive:!1}),i||t.addEventListener("mouseout",(t=>{const n=e(t.target);if(!n)return;const i=n.closest(".site-card-container");if(!(i instanceof HTMLElement))return;const r=t.relatedTarget;r instanceof Node&&i.contains(r)||"true"===i.getAttribute("data-active")&&o(i,!1)}),{passive:!0});const n=(t,n)=>{const i=e(t.target);if(!i)return;const r=i.closest(".site-card-link");if(!r)return;const a=r.closest(".site-card-container");a instanceof HTMLElement&&a.classList.toggle("is-focused",n)};t.addEventListener("focusin",(e=>n(e,!0)),{passive:!0}),t.addEventListener("focusout",(e=>n(e,!1)),{passive:!0}),t.addEventListener("keydown",(t=>{const n=e(t.target);if(!n)return;const i=n.closest(".site-card-link");if(!i)return;const r=i.closest(".site-card-container");if(r instanceof HTMLElement&&!n.closest(".site-card-cta a"))if("Enter"===t.key||" "===t.key){const e="true"===r.getAttribute("data-active");o(r,!e),t.preventDefault()}else"Escape"===t.key&&o(r,!1)}),{passive:!1})}let d=!1;function u(){c(),function(){if(d)return;d=!0;const t=t=>{const r=e(t.target);r&&document.querySelectorAll('.site-card-container[data-active="true"]').forEach((e=>{if(!(e instanceof HTMLElement&&n.has(e)))return;const a=e.querySelector(".site-card-cta"),s=a instanceof HTMLElement&&a.contains(r),c=e.contains(r);s||c||setTimeout((()=>{if("true"===e.getAttribute("data-active")&&n.has(e))if(i)o(e,!1);else try{const n=document.elementFromPoint(t.clientX||0,t.clientY||0);n&&e.contains(n)||o(e,!1)}catch{o(e,!1)}}),i?10:0)}))};i||document.addEventListener("mousedown",t,{passive:!0}),document.addEventListener("click",t,{passive:!0})}();const t=document.querySelectorAll(".site-card-container");if(0===t.length)return;const r=e=>{e instanceof HTMLElement&&e.setAttribute("data-site-card-initialized","true")};if(t.length>=20)try{const e=new IntersectionObserver((n=>{n.forEach((t=>{t.isIntersecting&&t.target instanceof HTMLElement&&(r(t.target),e.unobserve(t.target))})),Array.from(t).every((e=>e.hasAttribute("data-site-card-initialized")))&&e.disconnect()}),{rootMargin:"100px"});t.forEach((t=>{t instanceof Element&&e.observe(t)}))}catch{t.forEach(r)}else t.forEach(r)}function l(){document.querySelectorAll('.site-card-container[data-active="true"]').forEach((e=>{e instanceof HTMLElement&&o(e,!1)}));const e=document.getElementById("sites-grid");e&&s.has(e)&&s.delete(e)}function f(){l(),u()}document.addEventListener("DOMContentLoaded",f),document.addEventListener("astro:page-load",(()=>{requestAnimationFrame((()=>{setTimeout((()=>{f()}),0)}))})),document.addEventListener("astro:before-swap",l),"loading"!==document.readyState&&f();
