import{j as e}from"../assets/jsx-runtime.CnDyYxjH.js";import{r as t}from"../assets/index.BiaIGwig.js";const a=["#ef4444","#3b82f6","#8b5cf6","#10b981","#f59e0b","#f97316","#06b6d4"];function s(e){if(0===e.trim().length)return"unknown";let t=e.trim();t=t.replace(/\s+/g," ");return t.split("").every((e=>e.charCodeAt(0)<=127))?(t=t.toLowerCase(),t=t.replace(/\s+/g,"-"),t=t.replace(/[^a-z0-9-]/g,""),t=t.replace(/-+/g,"-"),t=t.replace(/^-+|-+$/g,"")):(t=t.replace(/\s+/g,"-"),t=t.replace(/[^\u4e00-\u9fa5\w-]/g,""),t=t.replace(/-+/g,"-"),t=t.replace(/^-+|-+$/g,"")),t||"unknown"}const r=({sites:a,maxSites:s=17,showCategories:r=!0})=>{const i=t.useMemo((()=>a.filter(Boolean).slice(0,s)),[a,s]);return e.jsx("ul",{className:"site-list",itemProp:"itemListElement",children:i.map(((t,a)=>e.jsx(o,{site:t,rank:a+1,itemProp:"item",itemScope:!0,itemType:"https://schema.org/ListItem"},`${t.id}-${a}`)))})},o=t.memo((({site:r,rank:o,itemProp:i,itemScope:l,itemType:n})=>{const c=t.useMemo((()=>({name:r?.data?.title||"Unknown Site",slug:s(r?.data?.title||"unknown"),affiliateUrl:r?.data?.affiliate_url||"",lang:r?.data?.lang||"en",description:r?.data?.description||"",imageAlt:r?.data?.image_alt||r?.data?.title||"Unknown Site",logo:r?.data?.logo||void 0,logoIconClass:r?.data?.logoIconClass||null})),[r]),m=t.useMemo((()=>{const e=c.name.slice(0,1).toUpperCase(),t=function(e){if(!e||0===e.length)return"#6b7280";let t=0;const s=e.length;for(let a=0;a<s;a++)t=(t<<5)-t+e.charCodeAt(a)&4294967295;const r=Math.abs(t)%a.length;return a[r]||"#6b7280"}(c.name),s=`/${c.lang}/sites/${c.slug}`;return{firstChar:e,bgColor:t,detailHref:`/${c.lang}/sites/${c.slug}`,affiliateHref:function(e,t,a){if(!e||"#"===e)return"#";try{const s=e.startsWith("http")?new URL(e):new URL(e,"https://missavdh.com"),r=new URLSearchParams({utm_source:"missavdh.com",utm_medium:"referral",utm_campaign:a,utm_content:t.replace(/\s+/g,"_").toLowerCase(),ref:"missavdh",via:"missavdh"});return s.search=`${s.search?s.search+"&":""}${r.toString()}`,s.toString()}catch{return e}}(c.affiliateUrl||s,c.name,"site_list")}}),[c.name,c.affiliateUrl,c.lang,c.slug]),g=t.useMemo((()=>({title:c.name,description:c.description,href:m.affiliateHref,logoUrl:c.logo,logoIconClass:c.logoIconClass})),[c.name,c.description,c.logo,c.logoIconClass,m.affiliateHref]),h=t.useMemo((()=>{if(c.logoIconClass){const a=(t=c.logoIconClass)?t.startsWith("zh-ctm-icon")?"zh-ctm-icon":t.startsWith("ctm-icon")?"ctm-icon":t.startsWith("icon")?"icon":null:null;if(a)return e.jsx("div",{className:`site-logo-spritesheet ${a} ${c.logoIconClass}`,role:"img","aria-hidden":"true"})}var t;return e.jsx("div",{className:"site-logo-css font-noto-sans",style:{backgroundColor:m.bgColor},"aria-label":`${c.imageAlt} logo`,children:e.jsx("span",{className:"site-logo-char",children:m.firstChar})})}),[c.logoIconClass,c.imageAlt,m.bgColor,m.firstChar]),f=t.useMemo((()=>JSON.stringify(g)),[g]);return e.jsxs("li",{className:"site-item site-base group",itemScope:l,itemType:n||"https://schema.org/WebSite",itemProp:i,"aria-label":`网站列表项: ${c.name}`,"data-popover":f,children:[e.jsxs("div",{className:"site-item-left",children:[e.jsx("a",{href:m.detailHref,target:"_blank",rel:"noopener noreferrer nofollow sponsored",className:"site-logo-link","aria-label":`访问 ${c.name} 网站`,itemProp:"url",children:h}),e.jsx("a",{href:m.detailHref,target:"_blank",rel:"noopener noreferrer nofollow sponsored",className:"site-name-link","aria-label":`访问 ${c.name} 网站`,itemProp:"url",children:e.jsx("span",{itemProp:"name",className:"transition-theme",children:c.name})})]}),e.jsx("div",{className:"site-item-right",children:e.jsx("a",{href:m.detailHref,target:"_blank",rel:"noopener noreferrer nofollow sponsored",className:"search-icon-link","aria-label":`在新窗口打开 ${c.name}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",className:"search-icon",children:e.jsx("g",{children:e.jsx("g",{children:e.jsx("path",{fill:"currentColor",d:"M15.734 15.744a.947.947 0 0 1-.63.256.862.862 0 0 1-.629-.256l-2.852-2.889a7.12 7.12 0 0 1-4.425 1.533 7.159 7.159 0 0 1-5.094-2.103A7.15 7.15 0 0 1 0 7.194c0-1.926.747-3.735 2.104-5.09A7.159 7.159 0 0 1 7.198 0c1.928 0 3.737.747 5.094 2.103 2.577 2.575 2.812 6.664.57 9.533l2.872 2.851a.877.877 0 0 1 0 1.257zm-4.7-12.383a5.387 5.387 0 0 0-3.836-1.592c-1.436 0-2.812.57-3.835 1.592A5.383 5.383 0 0 0 1.77 7.194c0 1.435.57 2.81 1.593 3.833a5.42 5.42 0 0 0 7.67 0 5.38 5.38 0 0 0 1.593-3.833c0-1.454-.57-2.81-1.593-3.833z"})})})})})})]})}));o.displayName="SiteItem";export{r as default};
