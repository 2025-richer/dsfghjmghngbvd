import{i as e}from"./client.BxSJnJ-7.js";const t=new Set,n=new WeakSet;let o=!0,r="viewport",s=!1;function a(e){s||(s=!0,o??=e?.prefetchAll??!1,r??=e?.defaultStrategy??"hover",function(){for(const e of["touchstart","mousedown"])document.addEventListener(e,(e=>{u(e.target,"tap")&&c(e.target.href,{ignoreSlowConnection:!0})}),{passive:!0})}(),function(){let e;function t(t){const n=t.target.href;e&&clearTimeout(e),e=setTimeout((()=>{c(n)}),80)}function o(){e&&(clearTimeout(e),e=0)}document.body.addEventListener("focusin",(e=>{u(e.target,"hover")&&t(e)}),{passive:!0}),document.body.addEventListener("focusout",o,{passive:!0}),l((()=>{for(const e of document.getElementsByTagName("a"))n.has(e)||u(e,"hover")&&(n.add(e),e.addEventListener("mouseenter",t,{passive:!0}),e.addEventListener("mouseleave",o,{passive:!0}))}))}(),function(){let e;l((()=>{for(const t of document.getElementsByTagName("a"))n.has(t)||u(t,"viewport")&&(n.add(t),e??=i(),e.observe(t))}))}(),l((()=>{for(const e of document.getElementsByTagName("a"))u(e,"load")&&c(e.href)})))}function i(){const e=new WeakMap;return new IntersectionObserver(((t,n)=>{for(const o of t){const t=o.target,r=e.get(t);o.isIntersecting?(r&&clearTimeout(r),e.set(t,setTimeout((()=>{n.unobserve(t),e.delete(t),c(t.href)}),300))):r&&(clearTimeout(r),e.delete(t))}}))}function c(n,o){if(function(e,n){if(!navigator.onLine)return!1;if(!n&&f())return!1;try{const n=new URL(e,location.href);return location.origin===n.origin&&(location.pathname!==n.pathname||location.search!==n.search)&&!t.has(e)}catch{}return!1}(n=n.replace(/#.*/,""),o?.ignoreSlowConnection??!1))if(t.add(n),HTMLScriptElement.supports?.("speculationrules"))!function(e,t){const n=document.createElement("script");n.type="speculationrules",n.textContent=JSON.stringify({prerender:[{source:"list",urls:[e],eagerness:t}],prefetch:[{source:"list",urls:[e],eagerness:t}]}),document.head.append(n)}(n,o?.eagerness??"immediate");else if(document.createElement("link").relList?.supports?.("prefetch")&&"fetch"!==o?.with){const e=document.createElement("link");e.rel="prefetch",e.setAttribute("href",n),document.head.append(e)}else{const t=new Headers;for(const[n,o]of Object.entries(e))t.set(n,o);fetch(n,{priority:"low",headers:t})}}function u(e,t){if("A"!==e?.tagName)return!1;const n=e.dataset.astroPrefetch;return"false"!==n&&(!("tap"!==t||null==n&&!o||!f())||(null==n&&o||""===n?t===r:n===t))}function f(){if("connection"in navigator){const e=navigator.connection;return e.saveData||/2g/.test(e.effectiveType)}return!1}function l(e){e();let t=!1;document.addEventListener("astro:page-load",(()=>{t?e():t=!0}))}export{a as i};
