import{i as t}from"./client.BxSJnJ-7.js";const e="data-astro-transition-persist",n=["data-astro-transition","data-astro-transition-fallback"],o=new Set;function r(t){const e=t.src?new URL(t.src,location.href).href:t.textContent;return!!o.has(e)||(o.add(e),!1)}function i(t,n){n.replaceWith(t);for(const o of n.querySelectorAll(`[${e}]`)){const n=o.getAttribute(e),r=t.querySelector(`[${e}="${n}"]`);r&&(r.replaceWith(o),"astro-island"===r.localName&&l(o)&&!d(o,r)&&(o.setAttribute("ssr",""),o.setAttribute("props",r.getAttribute("props"))))}a(t)}function a(t){t.querySelectorAll("template[shadowrootmode]").forEach((t=>{const e=t.getAttribute("shadowrootmode"),n=t.parentNode;if(("closed"===e||"open"===e)&&n instanceof HTMLElement){const o=n.attachShadow({mode:e});o.appendChild(t.content),t.remove(),a(o)}}))}const s=({activeElement:t,start:e,end:n})=>{t&&(t.focus(),(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement)&&("number"==typeof e&&(t.selectionStart=e),"number"==typeof n&&(t.selectionEnd=n)))},c=(t,n)=>{const o=t.getAttribute(e),r=o&&n.head.querySelector(`[${e}="${o}"]`);if(r)return r;if(t.matches("link[rel=stylesheet]")){const e=t.getAttribute("href");return n.head.querySelector(`link[rel=stylesheet][href="${e}"]`)}return null},l=t=>{const e=t.dataset.astroTransitionPersistProps;return null==e||"false"===e},d=(t,e)=>t.getAttribute("props")===e.getAttribute("props"),u=t=>{!function(t){for(const e of t.scripts)!e.hasAttribute("data-astro-rerun")&&r(e)&&(e.dataset.astroExec="")}(t),function(t){const e=document.documentElement,o=[...e.attributes].filter((({name:t})=>(e.removeAttribute(t),n.includes(t))));[...t.documentElement.attributes,...o].forEach((({name:t,value:n})=>e.setAttribute(t,n)))}(t),function(t){for(const e of Array.from(document.head.children)){const n=c(e,t);n?n.remove():e.remove()}document.head.append(...t.head.children)}(t);const o=(()=>{const t=document.activeElement;if(t?.closest(`[${e}]`)){if(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement){const e=t.selectionStart,n=t.selectionEnd;return()=>s({activeElement:t,start:e,end:n})}return()=>s({activeElement:t})}return()=>s({activeElement:null})})();i(t.body,document.body),o()},m="astro:after-swap";class f extends Event{from;to;direction;navigationType;sourceElement;info;newDocument;signal;constructor(t,e,n,o,r,i,a,s,c,l){super(t,e),this.from=n,this.to=o,this.direction=r,this.navigationType=i,this.sourceElement=a,this.info=s,this.newDocument=c,this.signal=l,Object.defineProperties(this,{from:{enumerable:!0},to:{enumerable:!0,writable:!0},direction:{enumerable:!0,writable:!0},navigationType:{enumerable:!0},sourceElement:{enumerable:!0},info:{enumerable:!0},newDocument:{enumerable:!0,writable:!0},signal:{enumerable:!0}})}}class h extends f{formData;loader;constructor(t,e,n,o,r,i,a,s,c,l){super("astro:before-preparation",{cancelable:!0},t,e,n,o,r,i,a,s),this.formData=c,this.loader=l.bind(this,this),Object.defineProperties(this,{formData:{enumerable:!0},loader:{enumerable:!0,writable:!0}})}}class p extends f{direction;viewTransition;swap;constructor(t,e){super("astro:before-swap",void 0,t.from,t.to,t.direction,t.navigationType,t.sourceElement,t.info,t.newDocument,t.signal),this.direction=t.direction,this.viewTransition=e,this.swap=()=>u(this.newDocument),Object.defineProperties(this,{direction:{enumerable:!0},viewTransition:{enumerable:!0},swap:{enumerable:!0,writable:!0}})}}async function v(t,e,n,o,r,i,a,s,c){const l=new h(t,e,n,o,r,i,window.document,a,s,c);var d;return document.dispatchEvent(l)&&(await l.loader(),l.defaultPrevented||(d="astro:after-preparation",document.dispatchEvent(new Event(d)),"traverse"!==l.navigationType&&w({scrollX:scrollX,scrollY:scrollY}))),l}const w=t=>{history.state&&(history.scrollRestoration="manual",history.replaceState({...history.state,...t},""))},y=!!document.startViewTransition,b=()=>!!document.querySelector('[name="astro-view-transitions-enabled"]'),E=(t,e)=>t.pathname===e.pathname&&t.search===e.search;let g,T,A;const S=t=>document.dispatchEvent(new Event(t)),x=()=>S("astro:page-load"),D="data-astro-transition-persist",L="data-astro-transition",k="data-astro-transition-fallback";let P,X=0;function Y(){const t=document.querySelector('[name="astro-view-transitions-fallback"]');return t?t.getAttribute("content"):"animate"}history.state?(X=history.state.index,scrollTo({left:history.state.scrollX,top:history.state.scrollY})):b()&&(history.replaceState({index:X,scrollX:scrollX,scrollY:scrollY},""),history.scrollRestoration="manual");const q=(t,e,n,o,r)=>{const i=E(e,t),a=document.title;document.title=o;let s=!1;if(t.href!==location.href&&!r)if("replace"===n.history){const e=history.state;history.replaceState({...n.state,index:e.index,scrollX:e.scrollX,scrollY:e.scrollY},"",t.href)}else history.pushState({...n.state,index:++X,scrollX:0,scrollY:0},"",t.href);if(document.title=a,A=t,i||(scrollTo({left:0,top:0,behavior:"instant"}),s=!0),r)scrollTo(r.scrollX,r.scrollY);else{if(t.hash){history.scrollRestoration="auto";const e=history.state;location.href=t.href,history.state||(history.replaceState(e,""),i&&window.dispatchEvent(new PopStateEvent("popstate")))}else s||scrollTo({left:0,top:0,behavior:"instant"});history.scrollRestoration="manual"}};async function H(t,e,n,o,r){async function i(t){const e=document.getAnimations();document.documentElement.setAttribute(k,t);const n=document.getAnimations().filter((t=>!e.includes(t)&&!function(t){const e=t.effect;return!!(e&&e instanceof KeyframeEffect&&e.target)&&"infinite"===window.getComputedStyle(e.target,e.pseudoElement).animationIterationCount}(t)));return Promise.allSettled(n.map((t=>t.finished)))}const a=document.title,s=await async function(t,e,n){const o=new p(t,e);return document.dispatchEvent(o),n&&await n(),o.swap(),o}(t,n.viewTransition,(async()=>{if("animate"===r&&!n.transitionSkipped&&!t.signal.aborted)try{await i("old")}catch{}}));q(s.to,s.from,e,a,o),S(m),"animate"===r&&(n.transitionSkipped||s.signal.aborted?n.viewTransitionFinished():i("new").finally((()=>n.viewTransitionFinished())))}async function M(e,n,o,r,i){const a=(g?.controller.abort(),g={controller:new AbortController});if(!b()||location.origin!==o.origin)return a===g&&(g=void 0),void(location.href=o.href);const s=i?"traverse":"replace"===r.history?"replace":"push";if("traverse"!==s&&w({scrollX:scrollX,scrollY:scrollY}),E(n,o)&&!r.formData&&("back"!==e&&o.hash||"back"===e&&n.hash))return q(o,n,r,document.title,i),void(a===g&&(g=void 0));const c=await v(n,o,e,s,r.sourceElement,r.info,a.controller.signal,r.formData,(async function(e){const o=e.to.href,r={signal:e.signal};if(e.formData){r.method="POST";const t=e.sourceElement instanceof HTMLFormElement?e.sourceElement:e.sourceElement instanceof HTMLElement&&"form"in e.sourceElement?e.sourceElement.form:e.sourceElement?.closest("form");r.body=void 0!==n&&"application/x-www-form-urlencoded"===Reflect.get(HTMLFormElement.prototype,"attributes",t).getNamedItem("enctype")?.value?new URLSearchParams(e.formData):e.formData}const i=await async function(e,n){try{const o=new Headers(n?.headers);for(const[e,n]of Object.entries(t))o.set(e,n);const r=await fetch(e,{...n,headers:o}),i=(r.headers.get("content-type")??"").split(";",1)[0].trim();return"text/html"!==i&&"application/xhtml+xml"!==i?null:{html:await r.text(),redirected:r.redirected?r.url:void 0,mediaType:i}}catch{return null}}(o,r);if(null===i)return void e.preventDefault();if(i.redirected){const t=new URL(i.redirected);if(t.origin!==e.to.origin)return void e.preventDefault();e.to=t}if(P??=new DOMParser,e.newDocument=P.parseFromString(i.html,i.mediaType),e.newDocument.querySelectorAll("noscript").forEach((t=>t.remove())),!e.newDocument.querySelector('[name="astro-view-transitions-enabled"]')&&!e.formData)return void e.preventDefault();const a=function(t){const e=[];for(const n of t.querySelectorAll("head link[rel=stylesheet]"))if(!document.querySelector(`[${D}="${n.getAttribute(D)}"], link[rel=stylesheet][href="${n.getAttribute("href")}"]`)){const t=document.createElement("link");t.setAttribute("rel","preload"),t.setAttribute("as","style"),t.setAttribute("href",n.getAttribute("href")),e.push(new Promise((e=>{["load","error"].forEach((n=>t.addEventListener(n,e))),document.head.append(t)})))}return e}(e.newDocument);a.length&&!e.signal.aborted&&await Promise.all(a)}));if(c.defaultPrevented||c.signal.aborted)return a===g&&(g=void 0),void(c.signal.aborted||(location.href=o.href));const l=await async function(){if(T&&T.viewTransition){try{T.viewTransition.skipTransition()}catch{}try{await T.viewTransition.updateCallbackDone}catch{}}return T={transitionSkipped:!1}}();if(c.signal.aborted)a===g&&(g=void 0);else{if(document.documentElement.setAttribute(L,c.direction),y)l.viewTransition=document.startViewTransition((async()=>await H(c,r,l,i)));else{const t=(async()=>{await Promise.resolve(),await H(c,r,l,i,Y())})();l.viewTransition={updateCallbackDone:t,ready:t,finished:new Promise((t=>l.viewTransitionFinished=t)),skipTransition:()=>{l.transitionSkipped=!0,document.documentElement.removeAttribute(k)},types:new Set}}l.viewTransition?.updateCallbackDone.finally((async()=>{await function(){let t=Promise.resolve(),e=!1;for(const n of document.getElementsByTagName("script"))void 0===n.dataset.astroExec&&"module"===n.getAttribute("type")&&(e=null===n.getAttribute("src"));e&&document.body.insertAdjacentHTML("beforeend",'<script type="module" src="data:application/javascript,"/>');for(const n of document.getElementsByTagName("script")){if(""===n.dataset.astroExec)continue;const e=n.getAttribute("type");if(e&&"module"!==e&&"text/javascript"!==e)continue;const o=document.createElement("script");o.innerHTML=n.innerHTML;for(const r of n.attributes){if("src"===r.name){const e=new Promise((t=>{o.onload=o.onerror=t}));t=t.then((()=>e))}o.setAttribute(r.name,r.value)}o.dataset.astroExec="",n.replaceWith(o)}return t}(),x(),(()=>{let t=document.createElement("div");t.setAttribute("aria-live","assertive"),t.setAttribute("aria-atomic","true"),t.className="astro-route-announcer",document.body.append(t),setTimeout((()=>{let e=document.title||document.querySelector("h1")?.textContent||location.pathname;t.textContent=e}),60)})()})),l.viewTransition?.finished.finally((()=>{l.viewTransition=void 0,l===T&&(T=void 0),a===g&&(g=void 0),document.documentElement.removeAttribute(L),document.documentElement.removeAttribute(k)}));try{await(l.viewTransition?.updateCallbackDone)}catch(d){}}}async function C(t,e){await M("forward",A,new URL(t,location.href),e??{})}const R=()=>{!history.state||scrollX===history.state.scrollX&&scrollY===history.state.scrollY||w({scrollX:scrollX,scrollY:scrollY})};if(y||"none"!==Y())if(A=new URL(location.href),addEventListener("popstate",(function(t){if(!b()&&t.state)return void location.reload();if(null===t.state)return;const e=history.state,n=e.index,o=n>X?"forward":"back";X=n,M(o,A,new URL(location.href),{},e)})),addEventListener("load",x),"onscrollend"in window)addEventListener("scrollend",R);else{let t,e,n,o;const r=()=>o!==history.state?.index?(clearInterval(t),void(t=void 0)):e===scrollY&&n===scrollX?(clearInterval(t),t=void 0,void R()):(e=scrollY,void(n=scrollX));addEventListener("scroll",(()=>{void 0===t&&(o=history.state?.index,e=scrollY,n=scrollX,t=window.setInterval(r,50))}),{passive:!0})}for(const $ of document.getElementsByTagName("script"))r($),$.dataset.astroExec="";export{m as T,C as n,y as s};
